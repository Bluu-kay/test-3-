(()=>{const e=!window.matchMedia("(prefers-reduced-motion: reduce)").matches;let t=[],s={x:.5*window.innerWidth,y:.35*window.innerHeight},n=!1;const i=[{id:"mouse-highlight",sizePx:36,speed:0,opacity:.22,followMouse:!0,gradient:"radial-gradient(circle at 50% 50%, var(--glow) 0%, hsla(var(--h), var(--s), var(--l), 0.18) 55%, transparent 100%)"}],r=[{title:"Module Box Compliance",description:"Checked module boxes and verified all documents were present and complete.",evidence:"KSB Aligned: Reason for alignment: "},{title:"Quality Newsletter Section",description:"Created a quality section in the newsletter to inform academics.",evidence:"KSB Aligned: Reason for alignment: "},{title:"MDEP + Module Monitoring",description:"Monitored MDEP and module box performance.",evidence:"KSB Aligned: Reason for alignment: "},{title:"Modules of Concern",description:"Outlined all modules of concern for review.",evidence:"KSB Aligned: Reason for alignment: "},{title:"School Leadership Briefing",description:"Presented shortcomings with solutions and improvements.",evidence:"KSB Aligned: Reason for alignment: "},{title:"100% MDEP Submissions",description:"Achieved 100% submission rate for 2023â€“2025.",evidence:"KSB Aligned: Reason for alignment: "},{title:"External Examiner Events",description:"Hosted events with external examiners and academics.",evidence:"KSB Aligned: Reason for alignment: "}],a=()=>{if(!t.length)return;const e=window.innerWidth,n=window.innerHeight,i=Math.min(e,n);t.forEach(t=>{const r=Number(t.dataset.sizePx||0),a=r>0?r:i*Number(t.dataset.size||1),o="true"===t.dataset.followMouse,l=(o?s.x:e*Number(t.dataset.x||.5))-a/2,d=(o?s.y:n*Number(t.dataset.y||.5))-a/2;t.style.width=`${a}px`,t.style.height=`${a}px`,t.style.left=`${l}px`,t.style.top=`${d}px`,t.dataset.baseY=String(d)})},o=()=>{if(!t.length)return;const s=window.scrollY||window.pageYOffset;t.forEach(t=>{if(!e)return void(t.style.transform="translate3d(0, 0, 0)");const n=Number(t.dataset.speed||0);t.style.transform=`translate3d(0, ${s*n}px, 0)`})},l=[{title:"Workflow Automation",description:"Automated stakeholder coordination and evidence collection processes.",evidence:"KSB Aligned: K1, S2, B4<br>Reason: Streamlined data flow between departments."},{title:"Short Course Delivery",description:"Coordinated the administrative lifecycle of professional short courses.",evidence:"KSB Aligned: K3, S5<br>Reason: Managed enrollment and certification workflows."},{title:"Accreditation Support",description:"Prepared documentation and evidence for institutional accreditation reviews.",evidence:"KSB Aligned: K4, B2<br>Reason: Ensured compliance with regulatory standards."}],d={"Module Box Compliance":[{href:"evidence/module-box-compliance.html",label:"Module boxes"}],"Quality Newsletter Section":[{href:"evidence/quality-newsletter-section.html",label:"Newsletter section"}],"MDEP + Module Monitoring":[{href:"evidence/mdep-module-monitoring.html",label:"MDEP & Monitoring"}],"Modules of Concern":[{href:"evidence/modules-of-concern.html",label:"Modules of concern"}],"School Leadership Briefing":[{href:"evidence/slt-shortcomings-solutions.html",label:"Leadership briefing"}],"100% MDEP Submissions":[{href:"evidence/mdep-100-submission-rate.html",label:"Submission rates"}],"External Examiner Events":[{href:"evidence/external-examiner-events.html",label:"External events"}],"Workflow Automation":[{href:"evidence/excel-vba-tracking.html",label:"Excel/VBA tracking"},{href:"evidence/professional-pathways-excel.html",label:"Professional Pathways"}],"Short Course Delivery":[{href:"evidence/short-course-placements-liaison.html",label:"Placements liaison"},{href:"evidence/short-course-draft-content.html",label:"Draft content"}],"Accreditation Support":[{href:"evidence/athena-swan-admin-support.html",label:"Athena SWAN admin"}],"Staff Development Support":[{href:"evidence/staff-development-tech-support.html",label:"Tech support"}]},c=()=>{n||(n=!0,window.requestAnimationFrame(()=>{n=!1,a(),o()}))},p=e=>{document.body.classList.add("is-leaving"),setTimeout(()=>{window.location.href=e},1e3)};document.addEventListener("DOMContentLoaded",()=>{requestAnimationFrame(()=>{document.body.classList.add("is-enter")}),(()=>{const e=document.createElement("div");e.className="dynamic-bg",t=i.map(t=>{const s=document.createElement("div");return s.className="dynamic-bg__layer",t.id&&(s.dataset.id=t.id),s.dataset.size=String(t.size||""),s.dataset.sizePx=String(t.sizePx||""),s.dataset.x=String(t.x),s.dataset.y=String(t.y),s.dataset.speed=String(t.speed),s.dataset.followMouse=t.followMouse?"true":"false",s.style.opacity=String(t.opacity),s.style.background=t.gradient,e.appendChild(s),s}),document.body.prepend(e)})(),a(),o(),(()=>{const e=e=>{const t=[];return e.forEach(e=>{const s=t.find(t=>t.title===e.title);s?e.evidence&&s.evidence!==e.evidence&&(s.evidence.includes(e.evidence)||(s.evidence+="<br><br>"+e.evidence)):t.push({...e})}),t},t=document.querySelector(".task-grid:not(#slt-task-grid)");if(t&&r.length){const s=e(r).map((e,t)=>{const s=120*t,n=d[e.title],i=Array.isArray(n)&&n.length?'<div class="evidence-links">'+n.map(e=>`<a class="button ghost" href="${e.href}">${e.label||"View evidence"}</a>`).join(" ")+"</div>":"";return`\n        <div class="reveal" style="--d: ${s}ms;">\n          <details class="task-card">\n            <summary>\n              <span class="task-title">${e.title}</span>\n              <span class="task-desc">${e.description}</span>\n            </summary>\n            <div class="task-expand">\n              ${e.evidence}\n              ${i}\n            </div>\n          </details>\n        </div>\n      `}).join("");t.innerHTML=s}const s=document.querySelector("#slt-task-grid");if(s&&l.length){const t=e(l).map((e,t)=>{const s=120*t,n=d[e.title],i=Array.isArray(n)&&n.length?'<div class="evidence-links">'+n.map(e=>`<a class="button ghost" href="${e.href}">${e.label||"View evidence"}</a>`).join(" ")+"</div>":"";return`\n        <div class="reveal" style="--d: ${s}ms;">\n          <details class="task-card">\n            <summary>\n              <span class="task-title">${e.title}</span>\n              <span class="task-desc">${e.description}</span>\n            </summary>\n            <div class="task-expand">\n              ${e.evidence}\n              ${i}\n            </div>\n          </details>\n        </div>\n      `}).join("");s.innerHTML=t}})(),(()=>{const t=Array.from(document.querySelectorAll(".task-card, .about-panel"));t.length&&t.forEach(t=>{const s=t.querySelector("summary");t.addEventListener("pointermove",s=>{if(!e)return;const n=t.getBoundingClientRect(),i=s.clientX-n.left,r=s.clientY-n.top;t.style.setProperty("--m-x",`${i}px`),t.style.setProperty("--m-y",`${r}px`);const a=(8*-(r/n.height-.5)).toFixed(2),o=(8*(i/n.width-.5)).toFixed(2);t.style.setProperty("--card-tilt-x",`${a}deg`),t.style.setProperty("--card-tilt-y",`${o}deg`)},{passive:!0}),t.addEventListener("pointerdown",()=>{t.classList.contains("is-collapsing")||t.classList.add("is-pressed")});const n=()=>{t.classList.remove("is-pressed")};t.addEventListener("pointerup",n),t.addEventListener("pointerleave",()=>{t.style.setProperty("--card-tilt-x","0deg"),t.style.setProperty("--card-tilt-y","0deg"),n()}),s&&s.addEventListener("click",e=>{t.open&&(e.preventDefault(),t.classList.remove("is-expanded"),t.classList.add("is-collapsing"),setTimeout(()=>{t.classList.contains("is-collapsing")&&(t.open=!1,t.classList.remove("is-collapsing"),t.style.setProperty("--card-translate-y","0px"),t.style.setProperty("--card-scale","1"))},800))}),t.addEventListener("toggle",e=>{if(t.open){const e=t.closest(".task-grid, .about");e&&e.querySelectorAll(".task-card, .about-panel").forEach(e=>{e!==t&&e.open&&(e.classList.remove("is-expanded"),e.classList.add("is-collapsing"),setTimeout(()=>{e.open=!1,e.classList.remove("is-collapsing"),e.style.setProperty("--card-translate-y","0px"),e.style.setProperty("--card-scale","1")},800))}),requestAnimationFrame(()=>{t.classList.remove("is-collapsing"),t.offsetWidth,t.classList.add("is-expanded")})}})})})(),(()=>{let e=document.querySelector(".image-modal");if(!e){e=document.createElement("div"),e.className="image-modal",e.innerHTML='\n      <div class="image-modal-content">\n        <div class="image-modal-close" role="button" aria-label="Close image">\n          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>\n        </div>\n        <img src="" alt="Enlarged view">\n      </div>\n    ',document.body.appendChild(e);const t=()=>{e.classList.remove("is-open")};e.addEventListener("click",s=>{(s.target===e||s.target.closest(".image-modal-close"))&&t()}),document.addEventListener("keydown",s=>{"Escape"===s.key&&e.classList.contains("is-open")&&t()})}document.addEventListener("click",t=>{const s=t.target.closest(".evidence-gallery-img");if(s){const t=e.querySelector("img");t.src=s.src,t.alt=s.alt||"Enlarged view",e.classList.add("is-open")}})})();const n=document.querySelector(".settings-button"),m=document.querySelector(".settings-panel");n&&m&&(n.addEventListener("click",e=>{e.stopPropagation(),m.classList.toggle("is-open")}),document.addEventListener("click",e=>{m.contains(e.target)||n.contains(e.target)||m.classList.remove("is-open")}),n.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m.classList.toggle("is-open"))}));const h=document.querySelector(".color-picker");if(h){const e=e=>{let t=0,s=0,n=0;4===e.length?(t=parseInt(e[1]+e[1],16),s=parseInt(e[2]+e[2],16),n=parseInt(e[3]+e[3],16)):7===e.length&&(t=parseInt(e.substring(1,3),16),s=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16)),t/=255,s/=255,n/=255;const i=Math.max(t,s,n),r=Math.min(t,s,n);let a,o,l=(i+r)/2;if(i===r)a=o=0;else{const e=i-r;switch(o=l>.5?e/(2-i-r):e/(i+r),i){case t:a=(s-n)/e+(s<n?6:0);break;case s:a=(n-t)/e+2;break;case n:a=(t-s)/e+4}a/=6}return{h:360*a,s:100*o,l:100*l}},t=t=>{const s=e(t),n=document.documentElement,i=s.l>70;n.style.setProperty("--accent",t),n.style.setProperty("--glow",`hsla(${s.h}, ${s.s}%, ${s.l}%, 0.35)`),i?(n.style.setProperty("--ink",`hsl(${s.h}, ${Math.max(15,.3*s.s)}%, 12%)`),n.style.setProperty("--ink-soft",`hsl(${s.h}, ${Math.max(15,.25*s.s)}%, 22%)`),n.style.setProperty("--accent-deep",`hsl(${s.h}, ${Math.max(20,.5*s.s)}%, 18%)`),n.style.setProperty("--text-on-accent",`hsl(${s.h}, ${Math.max(15,.3*s.s)}%, 12%)`),n.style.setProperty("--text-on-bg",`hsl(${s.h}, ${Math.max(15,.3*s.s)}%, 12%)`),n.style.setProperty("--text-on-footer","#ffffff"),n.style.setProperty("--text-on-ink","#ffffff"),n.style.setProperty("--text-on-accent-deep","#ffffff")):(n.style.setProperty("--ink",`hsl(${s.h}, ${Math.max(10,.2*s.s)}%, 24%)`),n.style.setProperty("--ink-soft",`hsl(${s.h}, ${Math.max(10,.15*s.s)}%, 32%)`),n.style.setProperty("--accent-deep",`hsl(${s.h}, ${.4*s.s}%, 29%)`),n.style.setProperty("--text-on-accent","#ffffff"),n.style.setProperty("--text-on-bg","#ffffff"),n.style.setProperty("--text-on-footer","#ffffff"),n.style.setProperty("--text-on-ink","#ffffff"),n.style.setProperty("--text-on-accent-deep","#ffffff")),n.style.setProperty("--mint",`hsl(${s.h}, ${.35*s.s}%, 62%)`),n.style.setProperty("--sand",`hsl(${s.h}, ${.2*s.s}%, 83%)`),n.style.setProperty("--cream",`hsl(${s.h}, ${.2*s.s}%, 83%)`);const r=i?97:94;n.style.setProperty("--panel",`hsl(${s.h}, ${.3*s.s}%, ${r}%)`),n.style.setProperty("--panel-strong",`hsl(${s.h}, ${.25*s.s}%, ${r+2}%)`),n.style.setProperty("--panel-soft",`hsl(${s.h}, ${.25*s.s}%, ${r-3}%)`);const a=i?85:54;n.style.setProperty("--bg-main",`hsl(${s.h}, ${.15*s.s}%, ${a}%)`),i?(n.style.setProperty("--bg-grad-1",`hsl(${s.h}, ${.15*s.s}%, 92%)`),n.style.setProperty("--bg-grad-2",`hsl(${s.h}, ${.15*s.s}%, 85%)`),n.style.setProperty("--bg-grad-3",`hsl(${s.h}, ${.15*s.s}%, 78%)`),n.style.setProperty("--bg-grad-4",`hsl(${s.h}, ${.15*s.s}%, 72%)`)):(n.style.setProperty("--bg-grad-1",`hsl(${s.h}, ${.15*s.s}%, 60%)`),n.style.setProperty("--bg-grad-2",`hsl(${s.h}, ${.15*s.s}%, 54%)`),n.style.setProperty("--bg-grad-3",`hsl(${s.h}, ${.15*s.s}%, 48%)`),n.style.setProperty("--bg-grad-4",`hsl(${s.h}, ${.15*s.s}%, 44%)`));const o=i?.25:.14;n.style.setProperty("--shadow",`hsla(${s.h}, ${.4*s.s}%, 15%, ${o})`),n.style.setProperty("--h",`${s.h}`),n.style.setProperty("--s",`${s.s}%`),n.style.setProperty("--l",`${Math.min(90,1.2*s.l)}%`),localStorage.setItem("themeColor",t)},s=localStorage.getItem("themeColor");s&&(t(s),h.value=s),h.addEventListener("input",e=>{t(e.target.value)})}document.querySelectorAll(".refresh-trigger").forEach(e=>{const t=()=>{const e=window.location.pathname+window.location.search+window.location.hash,t=`index.html?redirect=${encodeURIComponent(e)}`;p(t)};e.addEventListener("click",t),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())})}),document.addEventListener("click",e=>{const t=e.target.closest("a");if(!t)return;const s=t.getAttribute("href"),n=t.getAttribute("target");!s||s.startsWith("#")||s.startsWith("mailto:")||s.startsWith("tel:")||"_blank"===n||s.includes("://")||t.hasAttribute("download")||(e.preventDefault(),p(s))}),e&&window.addEventListener("scroll",()=>{window.requestAnimationFrame(o)},{passive:!0}),window.addEventListener("resize",()=>{c()}),window.addEventListener("pointermove",e=>{s={x:e.clientX,y:e.clientY},c()},{passive:!0})}),window.addEventListener("pageshow",e=>{e.persisted&&(document.body.classList.remove("is-leaving"),document.body.classList.add("is-enter"))})})();